{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)ca5d9a12-f4ac-4e61-8357-e00585cb3ac5","ParentGuid":"(Guid)5ddba855-b426-449d-8995-50de688f1386","Name":"(string)StartAction","Properties":{"@Type":"2c41fa04:IDictionary","@Value":{}},"TypeGuid":"(Guid)f8a58466-d7f6-439f-bbb8-d4600e41d099","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"f8a58466","@Value":{"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextLines":{"@Type":"[a5de0b0b]","@Value":[{"@Type":"a5de0b0b","@Value":{"Id":"(long)212","Tag":null,"Text":"(string){analysis -61, -46} // Querypointer used"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)213","Tag":null,"Text":"(string)//Check Bus System in which Device is running if _itfNode is set"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)214","Tag":null,"Text":"(string)IF itfHW_Node <> 0 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)215","Tag":null,"Text":"(string)\t_itfParentNode := itfHW_Node.ParentNode;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)216","Tag":null,"Text":"(string)\tWHILE NOT _xRoot DO"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)217","Tag":null,"Text":"(string)\t\tIF _itfParentNode <> 0 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)218","Tag":null,"Text":"(string)\t\t\t_itfBus := DED.INode_TO_IBus(itfNode:= _itfParentNode);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)219","Tag":null,"Text":"(string)\t\t\tIF _itfBus <> 0 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)220","Tag":null,"Text":"(string)\t\t\t\t//Get Bus Information"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)221","Tag":null,"Text":"(string)\t\t\t\t_itfBus.GetBusInfo (buiInfo := _stBusInfo);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)222","Tag":null,"Text":"(string)\t\t\t\t_eBusType := _stBusInfo.eType;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)223","Tag":null,"Text":"(string)\t\t\t\t_itfParentDevice := DED.INode_TO_IDevice (itfNode := _itfParentNode);\t//convert Prent Nod to Parent Device for diagnostic"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)224","Tag":null,"Text":"(string)\t\t\t\tIF _itfParentDevice <> 0 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)225","Tag":null,"Text":"(string)\t\t\t\t\t//read standard master infomation"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)226","Tag":null,"Text":"(string)\t\t\t\t\t_itfParentDevice.GetDeviceInfo (deiInfo := _stParentInfo);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)227","Tag":null,"Text":"(string)\t\t\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)228","Tag":null,"Text":"(string)\t\t\t\t_itfDevice:= DED.INode_TO_IDevice (itfNode := itfHW_Node);\t\t\t\t\t//convert Node to Device for diagnostic"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)229","Tag":null,"Text":"(string)\t\t\t\tIF _itfDevice <> 0 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)230","Tag":null,"Text":"(string)\t\t\t\t\t//read standard device infomation"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)231","Tag":null,"Text":"(string)\t\t\t\t\t_itfDevice.GetDeviceInfo (deiInfo := _stDeviceInfo);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)298","Tag":null,"Text":"(string)\t\t\t\t\t_pConnector := _itfDevice.Connector;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)299","Tag":null,"Text":"(string)\t\t\t\t\t_wType := _pConnector^.wType;\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)232","Tag":null,"Text":"(string)\t\t\t\tEND_IF\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)233","Tag":null,"Text":"(string)\t\t\t\tEXIT;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)234","Tag":null,"Text":"(string)\t\t\tELSIF _itfParentNode.IsRootNode THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)235","Tag":null,"Text":"(string)\t\t\t\t//No itfBus found in the Parent Node above the Input Node"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)236","Tag":null,"Text":"(string)\t\t\t\t_xRoot := TRUE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)237","Tag":null,"Text":"(string)\t\t\t\t_itfParentNode := itfHW_Node.ParentNode;\t//set Parent Node over INode"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)238","Tag":null,"Text":"(string)\t\t\t\t_itfParentDevice := DED.INode_TO_IDevice (itfNode := _itfParentNode);\t//convert Prent Nod to Parent Device for diagnostic"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)239","Tag":null,"Text":"(string)\t\t\t\tIF _itfParentDevice <> 0 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)240","Tag":null,"Text":"(string)\t\t\t\t\t//read standard master infomation"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)241","Tag":null,"Text":"(string)\t\t\t\t\t_itfParentDevice.GetDeviceInfo (deiInfo := _stParentInfo);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)242","Tag":null,"Text":"(string)\t\t\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)243","Tag":null,"Text":"(string)\t\t\t\t_itfDevice:= DED.INode_TO_IDevice (itfNode := itfHW_Node);\t\t\t\t\t//convert Node to Device for diagnostic"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)244","Tag":null,"Text":"(string)\t\t\t\tIF _itfDevice <> 0 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)245","Tag":null,"Text":"(string)\t\t\t\t\t//read standard device infomation"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)246","Tag":null,"Text":"(string)\t\t\t\t\t_itfDevice.GetDeviceInfo (deiInfo := _stDeviceInfo);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)247","Tag":null,"Text":"(string)\t\t\t\t\t_pConnector := _itfDevice.Connector;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)248","Tag":null,"Text":"(string)\t\t\t\t\t_wType := _pConnector^.wType;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)300","Tag":null,"Text":"(string)\t\t\t\t\t_dwID := _pConnector^.pParameterList^.dwParameterId;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)249","Tag":null,"Text":"(string)\t\t\t\tEND_IF\t\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)250","Tag":null,"Text":"(string)\t\t\t\t//IF Node in Level 2 and not ITFBus exist maybe it is Modbus RTU; Modbus RTU has type 91"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)251","Tag":null,"Text":"(string)\t\t\t\tIF _wType = 91 THEN\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)252","Tag":null,"Text":"(string)\t\t\t\t\t_eBusType := DED.BUS_TYPE.MODBUS_RTU;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)253","Tag":null,"Text":"(string)\t\t\t\t//IF Node in Level 1 and not ITFBus exist maybe it is SWD "}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)254","Tag":null,"Text":"(string)\t\t\t\tELSIF _udiLoop = 1 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)255","Tag":null,"Text":"(string)\t\t\t\t\tIF _itfDevice <> 0 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)256","Tag":null,"Text":"(string)\t\t\t\t\t\t//Check Device Number if missing search for Pos in SWD tree"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)257","Tag":null,"Text":"(string)\t\t\t\t\t\t_itfDevice.GetDeviceInfo (deiInfo := _stDeviceInfo);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)258","Tag":null,"Text":"(string)\t\t\t\t\t\tIF _stDeviceInfo.idInstance = 0 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)259","Tag":null,"Text":"(string)\t\t\t\t\t\t\t_itfParentNode := itfHW_Node.ParentNode;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)260","Tag":null,"Text":"(string)\t\t\t\t\t\t\t_itfFirstNode := _itfParentNode.FirstChildNode;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)261","Tag":null,"Text":"(string)\t\t\t\t\t\t\tIF _itfFirstNode = itfHW_Node THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)262","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t_byModulAddress := 1;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)263","Tag":null,"Text":"(string)\t\t\t\t\t\t\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)264","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t_udiSiblingNodeCount := ULINT_TO_UDINT (itfHW_Node.SiblingNodeCount);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)265","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t_itfNextNode := _itfFirstNode.NextSiblingNode;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)266","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\tFOR _udiLoop := 1 TO _udiSiblingNodeCount DO\t\t\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)267","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\tIF _itfNextNode = itfHW_Node THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)268","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\t\t_byModulAddress := UDINT_TO_BYTE (_udiLoop +1);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)269","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\t\t_eBusType := DED.BUS_TYPE.VEN_SPEC;\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)270","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\t\t{IF defined (variable: _ModuleInfo)}\t\t\t\t\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)271","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\t\t_ModuleInfo.xExecute := TRUE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)272","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\t\t{END_IF}"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)273","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\t\tEXIT;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)274","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)275","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\t\t_itfNextNode := _itfNextNode.NextSiblingNode;\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)276","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)277","Tag":null,"Text":"(string)\t\t\t\t\t\t\t\tEND_FOR"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)278","Tag":null,"Text":"(string)\t\t\t\t\t\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)279","Tag":null,"Text":"(string)\t\t\t\t\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)280","Tag":null,"Text":"(string)\t\t\t\t\tEND_IF\t\t\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)281","Tag":null,"Text":"(string)\t\t\t\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)282","Tag":null,"Text":"(string)\t\t\t\t\t//Node in Input is not from Type Device, so something is wrong in the COnfiguration or the input is wrong"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)283","Tag":null,"Text":"(string)\t\t\t\t\t_eBusType := DED.BUS_TYPE.UNKNOWN;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)284","Tag":null,"Text":"(string)\t\t\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)285","Tag":null,"Text":"(string)\t\t\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)286","Tag":null,"Text":"(string)\t\t\t\t// IF not ITF Bus and Root go to next Level"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)287","Tag":null,"Text":"(string)\t\t\t\t_itfParentNode := _itfParentNode.ParentNode;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)288","Tag":null,"Text":"(string)\t\t\t\t_udiLoop := _udiLoop +1;\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)289","Tag":null,"Text":"(string)\t\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)290","Tag":null,"Text":"(string)\t\tEND_IF\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)291","Tag":null,"Text":"(string)\tEND_WHILE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)292","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)293","Tag":null,"Text":"(string)ELSE\t "}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)294","Tag":null,"Text":"(string)\tiErrorID := eErrorCode := teErrorCodeEaton.DeviceMissing; //wrong configuration \t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)295","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)296","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)297","Tag":null,"Text":"(string)xComplete := TRUE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)5","Tag":null,"Text":"(string)\t"}}]}}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextLines":{"@Type":"[a5de0b0b]","@Value":[{"@Type":"a5de0b0b","@Value":{"Id":"(long)194","Tag":null,"Text":"(string)//Initalization Routine"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)195","Tag":null,"Text":"(string)(*Init for Drive FB*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)196","Tag":null,"Text":"(string){attribute 'naming' := 'omit'} "}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)197","Tag":null,"Text":"(string)METHOD StartAction"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)198","Tag":null,"Text":"(string)VAR_OUTPUT"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)199","Tag":null,"Text":"(string)\txComplete\t: BOOL;\t\t//Setting and Init Done, if the Variable is True the Method Cyclic will be called"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)200","Tag":null,"Text":"(string)\tiErrorID\t: INT;\t\t//if Error is happen set ErrorID to Error Code, after that CLeanUp will Call with Error ID as an Input"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)201","Tag":null,"Text":"(string)END_VAR"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)202","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)203","Tag":null,"Text":"(string)VAR"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)204","Tag":null,"Text":"(string)\t_itfFirstNode\t \t\t: DED.INode;\t\t//Interface from Hardware Device Tree"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)205","Tag":null,"Text":"(string)\t_itfNextNode \t\t\t: DED.INode;\t\t//Interface from Hardware Device Tree"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)206","Tag":null,"Text":"(string)\t_itfParentNode \t\t\t: DED.INode;\t\t//Interface from Hardware Device Tree"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)207","Tag":null,"Text":"(string)\t_xRoot\t\t\t\t\t: BOOL;\t\t\t\t//Reached PLC as Root Level"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)208","Tag":null,"Text":"(string)\t_udiSiblingNodeCount\t: UDINT;\t\t\t//Sibling Node Count in this Level; needed for found Modul Adress in SWD"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)209","Tag":null,"Text":"(string)\t_udiLoop\t\t\t\t: UDINT := 0;\t\t//Help Varialble for Loops "}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)210","Tag":null,"Text":"(string)\t_pConnector\t\t\t\t: POINTER TO DED.IoConfigConnector; //Read Connector for information about Connector Type"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)211","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)92","Tag":null,"Text":"(string)END_VAR"}}]}}}}}}},"TypeInfos":{"3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","a5de0b0b":"{a5de0b0b-1cb5-4913-ac21-9d70293ec00d}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","f8a58466":"{f8a58466-d7f6-439f-bbb8-d4600e41d099}","long":"System.Int64","string":"System.String"}}},"FormatVersion":"1.0"}